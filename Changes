Revision history for PAPS-Database-papsdb-Schema

0.005  Sun Feb 26 12:53:27 2012 -0500
  New features:
    - Treat the password_hash column in the users table as an encoded column,
      so setting that value automatically encrypts the value provided before
      updating the table and passwords can be verified using built-in
      functionality (commit 062b987cda).
    - Retrieve the created_date for a user when inserting a new record.  This
      column has a default value of the current timestamp (commit e9159fc03c).
    - Added schema information, result classes, and relationships for the new
      table user_work_data, which stores information for each user relating to
      works.
    - Added support for the rank column in the source_work_categories table.
      This column indicates what rank each category is for a work (e.g., if it
      is a primary category versus a secondary category).
    - Added support for the new author metadata columns in work_authors table.
      The author_name_text column optionally stores the literal text used in
      the work to name an author.  This can be used to keep track of how an
      author is named and to store a name for an author whose definitive
      "person" information has not yet been found.  The second new column,
      author_affiliation_text, optionally stores the literal text used to
      describe the author's affiliation.  Since there is no definitive way to
      store affiliation information, this will be the only way, for now, to
      keep track of an author's affiliation.  Later, like the author_name_text
      column, it will be used to keep track of how an affiliation is named and
      to keep track of affiliations that have not be definitively identified
      yet.
    - Include the new work_authors columns in the authors many-to-many
      relationship in the Work result class (commit fcb3880cf8).
    - Include the rank column from the source_work_categories table in the
      Work result class's source_categories many-to-many relationshiop (commit
      d9f6ffb5ec).
  Bug fixes:
    - The GroupUser's belongs_to relationship to the Groups result class,
      named "group", causes SQL to be created that uses the reserved word
      "group" incorrectly.  This relationship has now been redefined to the
      more innocuous name "grp" (commit 10bcdb2187).
    - Removed the NOT NULL constraint on the person_id column in the
      work_authors table.  If we only store the literal text used to reference
      a person in a work, but do not have a valid Person object, the person_id
      column will be null and should not cause an error (commit c97891b368).

0.004  Sun Jan 22 21:57:15 2012 -0500
  New features:
    - The referencing_works many-to-many relationship in the Work class now
      includes the same fields from the work_references table that the
      referenced_works relationship includes (commit 4b2f7fd9c2).
    - Added display_name methods for the SourceCategory, SourceCategoryType,
      SourceTag, and SourceTagTypes Result classes.  These, for now, just use
      the name field as the display name (comits b4595d0982 and 2fe112aa38).
    - Added a work_count method to the Source model, which returns the number
      of works that belong to the source (comit 277fe172c3).
    - Added a "year" column, a smallint, to the works table.
  Bug fixes:
    - The many-to-many relationship works in the People class referenced an
      incorrect (nonexistent) belongs_to relationship in the Works class
      (commit 4b2f7fd9c2).
    - The has-many relationships from Work to WorkReferences did not reflect
      the correct interpretation for these relationships.  These have been
      switched, so, for example, now the referenced_works relationship gives
      the list of works that that Work object references (commit 4e93443f94).
  Other:
    - Updated schema to DBIx-Class-Schema-Loader-0.07015.  Among other smaller
      changes, this version is able to determine "Person" is the singular form
      of "People", so the People Schema class has now been replaced by the
      Person class.

0.003  Sat Aug 6 12:53:36 2011 -0400
  New features:
    - Added Result classes for tag-, category- and metadata-related tables.
      This includes both the "source" and "official" versions of these tables,
      where appropriate, and mapping tables to relate source to official data.

0.002  Sat Jun 25 16:01:11 2011 -0400
  New features:
    - Added Result classes for user-, group-, and permissions-related tables.
    - Added Result classes for source- and file-related tables.
    - Added many-to-many relationships between new Result classes, as needed.
    - Added display_name methods for virtually all classes, which are used to
      create a short, descriptive string for objects of those classes.
    - Updated schema file to create all of the tables and populate them with
      sample data.
    - Added scripts to recreate the Result classes based on the database
      tables and create a schema diagram from the database.

0.001  2011-06-04 17:53:35 2011 -0400
  New features:
    - Initial version of the PAPS db schema.  Contains Result classes for all
      of the tables currently in the database.

